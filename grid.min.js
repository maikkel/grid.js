/*
Grid.js v0.1.1
Copyright 2014 Maik Kellerhals <maik.kellerhals@gmail.com> 
2014-06-29 
*/

var GRID=function(a){var b=function(a){var b=a.toString(16);return 1==b.length?"0"+b:b},c=0,d=0,e=0;return a.color={},a.color.makeObject=function(a){var b=a.substring(1,7),c=parseInt(b.substring(0,2),16),d=parseInt(b.substring(2,4),16),e=parseInt(b.substring(4,6),16);return{r:c,g:d,b:e,hex:a}},a.color.randomColor=function(){return"#"+b(parseInt(255*Math.random()))+b(parseInt(255*Math.random()))+b(parseInt(255*Math.random()))},a.color.makeGrey=function(a){return 16>a?"#0"+a.toString(16)+"0"+a.toString(16)+"0"+a.toString(16):"#"+a.toString(16)+a.toString(16)+a.toString(16)},a.color.fadeColor=function(a,f){return c=b(Math.floor(f*a.r)),d=b(Math.floor(f*a.g)),e=b(Math.floor(f*a.b)),"#"+c+d+e},a}(GRID||{}),GRID=function(a){var b={BLINK:0,FADEIN:1,FADEOUT:2};return a.Pixel=function(a,c){this.x=a,this.y=c,this.locked=!1,this.counter=0,this.done=!1,this.rate=8,this.animation=b.BLINK,this.color={r:0,g:0,b:0,hex:"#000000"}},a.Pixel.prototype.blink=function(c,d,e){this.locked||(this.animation=b.BLINK,c=a.color.makeObject(c),d=d||255,e=e||this.rate,this.color=c,this.rate=e,this.counter=d,-1==jQuery.inArray(this,a.updateArray)&&a.updateArray.push(this))},a.Pixel.prototype.fadeIn=function(c,d){if(!this.locked&&(this.animation=b.FADEIN,this.locked=!0,c=a.color.makeObject(c),d=d||this.rate,this.color=c,this.rate=d,this.counter=0,-1==jQuery.inArray(this,a.updateArray))){var e=this;a.updateArray.push(e)}},a.Pixel.prototype.fadeOut=function(c,d){if(this.animation=b.FADEOUT,this.locked=!0,c=a.color.makeObject(c),d=d||this.rate,this.color=c,this.rate=d,this.counter=255,-1==jQuery.inArray(this,a.updateArray)){var e=this;a.updateArray.push(e)}},a.Pixel.prototype.update=function(){this.animation==b.BLINK?this.updateBLINK():this.animation==b.FADEIN?this.updateFADEIN():this.animation==b.FADEOUT&&this.updateFADEOUT()},a.Pixel.prototype.updateFADEIN=function(){this.counter<=255?(a.draw.pixelClear(this.x,this.y),a.draw.pixelSize(this.x,this.y,this.color.hex,this.counter/255,0),this.counter+=this.rate):(this.counter=255,a.draw.pixelSize(this.x,this.y,this.color.hex,this.counter/255,0),this.done=!0)},a.Pixel.prototype.updateFADEOUT=function(){this.counter>=0?(a.draw.pixelClear(this.x,this.y),a.draw.pixelSize(this.x,this.y,this.color.hex,this.counter/255,0),this.counter-=this.rate):(this.counter=0,a.draw.pixelClear(this.x,this.y),this.done=!0,this.locked=!1)},a.Pixel.prototype.updateBLINK=function(){this.counter>=0?(a.fadeMode==GRID.FadeModes.FADE?a.draw.pixel(this.x,this.y,a.color.fadeColor(this.color,this.counter/255)):a.fadeMode==GRID.FadeModes.ZOOM?(a.draw.pixelClear(this.x,this.y),a.draw.pixelSize(this.x,this.y,this.color.hex,this.counter/255)):a.fadeMode==GRID.FadeModes.FADEANDZOOM&&(a.draw.pixelClear(this.x,this.y),a.draw.pixelSize(this.x,this.y,a.color.fadeColor(this.color,this.counter/255),this.counter/255)),this.counter-=this.rate):(this.counter=0,this.done=!0)},a}(GRID||{}),GRID=function(a){function b(b,c,d){setTimeout(function(){var e=a.pixels[b+d.x][c+d.y];e.fadeIn(d.color,32),e.locked=!0},20*b+30*c+200*Math.random())}function c(b,c,d){setTimeout(function(){var e=a.pixels[b+d.x][c+d.y];e.fadeOut(d.color,32),e.locked=!0},20*b+30*c+200*Math.random())}return a.addBox=function(b,c,d,e,f){return new a.Box(b,c,d,e,f)},a.Box=function(a,c,d,e,f){this.x=a,this.y=c,this.width=d,this.height=e,this.color=f||"#ffffff";for(var g=0;g<this.height;g++)for(var h=0;h<this.width;h++)b(h,g,this)},a.Box.prototype.remove=function(){for(var a=0;a<this.height;a++)for(var b=0;b<this.width;b++)c(b,a,this)},a}(GRID||{}),GRID=function(a){a.input={},a.mouseTrail=!0;var b=-1,c=-1,d=-1,e=-1,f=-1,g=-1,h=-1,i=-1;return a.input.trail=function(f){a.mouseTrail&&(d=parseInt(f.pageX/a.pixelSize),e=parseInt(f.pageY/a.pixelSize),(d!=b||e!=c)&&(b=d,c=e,void 0!=a.pixels[b][c]&&a.pixels[b][c].blink("#ff0000",Math.floor(255*Math.random()),8)))},a.input.trailMobile=function(j){var k=window.event;a.mouseTrail&&(d=parseInt(k.touches[0].pageX/a.pixelSize),e=parseInt(k.touches[0].pageY/a.pixelSize),(d!=b||e!=c)&&(b=d,c=e,void 0!=a.pixels[b][c]&&a.pixels[b][c].blink("#ff0000",Math.floor(255*Math.random()),8)),void 0!=k.touches[1]&&(h=parseInt(k.touches[1].pageX/a.pixelSize),i=parseInt(k.touches[1].pageY/a.pixelSize),(h!=f||i!=g)&&(f=h,g=i,void 0!=a.pixels[f][g]&&a.pixels[f][g].blink("#ffff00",Math.floor(255*Math.random()),8)))),j.preventDefault()},a.input.setup=function(){$(document).mousemove(function(b){a.input.trail(b)}),$(document).on("touchmove",function(b){a.input.trailMobile(b)})},a}(GRID||{}),GRID=function(a){return a.log=function(a){},a}(GRID||{}),GRID=function(a){return a.draw={},a.draw.pixel=function(b,c,d,e){var f;f=void 0==e?a.pixelGap:(a.pixelSize-e)/2;var g=e||a.pixelSize-2*f;a.context.beginPath(),a.context.rect(b*a.pixelSize+f,c*a.pixelSize+f,g,g),a.context.fillStyle=d,a.context.fill()},a.draw.pixelSize=function(b,c,d,e,f){var g=(a.pixelSize-2*f)*e;a.context.beginPath(),a.context.rect(b*a.pixelSize+f+.5*(a.pixelSize-f-g),c*a.pixelSize+f+.5*(a.pixelSize-f-g),g,g),a.context.fillStyle=d,a.context.fill()},a.draw.pixelClear=function(b,c){a.context.clearRect(b*a.pixelSize,c*a.pixelSize,a.pixelSize,a.pixelSize)},a}(GRID||{});window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();var GRID=function(a){a.maxFps=30,a.curFps=0,a.updateArray=new Array,a.doneArray=new Array,a.random,a.iterations=1;var b=Date.now(),c=Date.now(),d=c-b,e=0,f=1e3/a.maxFps,g=b,h=0,i=0,j=0,k=void 0,l=function(){if(a.random=Math.random(),a.doneArray.length=0,$.each(a.updateArray,function(b,c){c.update(),c.done&&(a.doneArray.push(c),c.done=!1)}),$.each(a.doneArray,function(b,c){var d=jQuery.inArray(c,a.updateArray);d>-1&&a.updateArray.splice(d,1)}),a.random<=.5)for(var b=0;b<a.iterations;b++)k=a.pixels[Math.floor(Math.random()*a.pixelCountX)][Math.floor(Math.random()*a.pixelCountY)],k.blink("#00ff00",Math.floor(255*Math.random()),4);else if(a.random>.5)for(var b=0;b<a.iterations;b++)k=a.pixels[Math.floor(Math.random()*a.pixelCountX)][Math.floor(Math.random()*a.pixelCountY)],k.blink("#0000ff",Math.floor(255*Math.random()),4)};return a.render=function(){requestAnimationFrame(a.render),a.random=Math.random(),c=Date.now(),d=c-b,d>f&&(h>1e3?(i=Date.now(),h=0,a.curFps=j,j=0):(h=Date.now()-i,++j),b=c-d%f,e=(b-g)/1e3,l())},a}(GRID||{}),GRID=function(a){a.version="0.1.1",a.canvas=void 0,a.context=void 0,a.pixels,a.pixelSize=16,a.pixelGap=1,a.FadeModes={FADE:0,ZOOM:1,FADEANDZOOM:2},a.fadeMode=a.FadeModes.FADE,a.pixelCountX=0,a.pixelCountY=0,a.log("GRID.js v."+a.version+" loaded");var b=function(){a.log("Window resized"),a.setup()};return a.setup=function(){a.screenWidth=$(window).width(),a.screenHeight=$(window).height(),a.pixelCountX=parseInt(a.screenWidth/a.pixelSize)+1,a.pixelCountY=parseInt(a.screenHeight/a.pixelSize)+1,a.canvas[0].width=a.screenWidth,a.canvas[0].height=a.screenHeight,void 0!=a.pixels&&(a.pixels.length=0),a.pixels=new Array(a.pixelCountX);for(var b=0;b<a.pixelCountX;b++){a.pixels[b]=new Array(a.pixelCountY);for(var c=0;c<a.pixelCountY;c++)a.pixels[b][c]=new a.Pixel(b,c)}},a.start=function(c){a.log("start! "+a.version),a.canvas=c||$("canvas"),a.context=a.canvas[0].getContext("2d"),$(window).resize(b),a.input.setup(),a.setup(),a.render()},a}(GRID||{});
//# sourceMappingURL=grid.min.js.map